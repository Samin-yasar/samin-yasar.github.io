<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>My Cinema Collection</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Spectral:wght@400;500;600&family=EB+Garamond:wght@400;500;600&family=Source+Serif+Pro:wght@400;600&family=Crimson+Pro:wght@400;500;600&display=swap" rel="stylesheet" />
<style>
  :root {
    --clr-parchment: #f0f4f9;
    --clr-paper: #ffffff;
    --clr-ink: #1e293b;
    --clr-ink-light: #475569;
    --clr-accent-primary: #3b82f6;
    --clr-accent-secondary: #1e40af;
    --clr-accent-light: #60a5fa;
    --clr-accent-lighter: #93c5fd;
    --clr-accent-lightest: #dbeafe;
    --clr-border-light: #e2e8f0;
    --clr-border-medium: #cbd5e1;
    --clr-watching: #3b82f6;
    --clr-watched: #10b981;
    --clr-watchlist: #8b5cf6;
    --clr-dropped: #ef4444;
    --clr-planning: #f59e0b;
    --shadow-soft: 0 1px 3px rgba(59, 130, 246, 0.08), 0 4px 12px rgba(59, 130, 246, 0.05);
    --shadow-lifted: 0 4px 16px rgba(59, 130, 246, 0.12), 0 8px 32px rgba(59, 130, 246, 0.08);
    --shadow-page: 2px 2px 8px rgba(59, 130, 246, 0.1), 4px 4px 16px rgba(59, 130, 246, 0.06);
    --radius: 8px;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Crimson Pro', 'Georgia', serif;
    background: var(--clr-parchment);
    background-image: 
      repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,0.01) 2px, rgba(0,0,0,0.01) 3px),
      repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.01) 2px, rgba(0,0,0,0.01) 3px);
    color: var(--clr-ink);
    min-height: 100vh;
    padding: 60px 24px 80px;
    -webkit-font-smoothing: antialiased;
    line-height: 1.7;
  }

  .wrapper { max-width: 1280px; margin: 0 auto; }

  /* ══════════════════════════════════════════
     HEADER with ornamental styling
  ══════════════════════════════════════════ */
  .header {
    text-align: center;
    margin-bottom: 64px;
    position: relative;
    padding-bottom: 32px;
  }

  .header::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 120px;
    height: 3px;
    background: linear-gradient(90deg, transparent, var(--clr-accent-primary), transparent);
  }

  .decorative-top {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    margin-bottom: 12px;
    opacity: 0.6;
  }

  .ornament {
    width: 40px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--clr-accent-primary), transparent);
  }

  .movie-icon {
    width: 32px;
    height: 32px;
    color: var(--clr-accent-primary);
  }

  .header h1 {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(2.5rem, 6vw, 4.5rem);
    font-weight: 700;
    letter-spacing: 0.5px;
    color: var(--clr-accent-secondary);
    margin-bottom: 8px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
  }

  .header .subtitle {
    font-family: 'EB Garamond', serif;
    font-size: 1.2rem;
    color: var(--clr-ink-light);
    font-style: italic;
    letter-spacing: 1px;
  }

  /* ══════════════════════════════════════════
     TOOLBAR: Search, Sort, Layout toggle
  ══════════════════════════════════════════ */
  .toolbar {
    background: var(--clr-paper);
    border: 1px solid var(--clr-border-light);
    border-radius: var(--radius);
    padding: 28px;
    margin-bottom: 40px;
    box-shadow: var(--shadow-soft);
  }

  .toolbar-row {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    align-items: center;
  }

  .search-box {
    flex: 1;
    min-width: 280px;
    position: relative;
  }

  .search-box input {
    width: 100%;
    padding: 14px 48px 14px 20px;
    font-family: 'Crimson Pro', serif;
    font-size: 1rem;
    border: 2px solid var(--clr-border-medium);
    border-radius: var(--radius);
    background: var(--clr-parchment);
    color: var(--clr-ink);
    transition: all 0.3s;
  }

  .search-box input:focus {
    outline: none;
    border-color: var(--clr-accent-primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  .search-icon {
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    color: var(--clr-ink-light);
    pointer-events: none;
  }

  .sort-select {
    padding: 14px 40px 14px 20px;
    font-family: 'Crimson Pro', serif;
    font-size: 1rem;
    border: 2px solid var(--clr-border-medium);
    border-radius: var(--radius);
    background: var(--clr-parchment);
    color: var(--clr-ink);
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' stroke='%235a5348' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    transition: all 0.3s;
  }

  .sort-select:focus {
    outline: none;
    border-color: var(--clr-accent-primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  .view-toggle {
    display: flex;
    gap: 8px;
    padding: 4px;
    background: var(--clr-parchment);
    border: 2px solid var(--clr-border-medium);
    border-radius: var(--radius);
  }

  .view-btn {
    padding: 10px 16px;
    border: none;
    background: transparent;
    cursor: pointer;
    border-radius: 2px;
    transition: all 0.2s;
    color: var(--clr-ink-light);
  }

  .view-btn:hover {
    background: rgba(59, 130, 246, 0.1);
  }

  .view-btn.active {
    background: var(--clr-accent-primary);
    color: white;
  }

  .view-btn svg {
    width: 20px;
    height: 20px;
  }

  /* ══════════════════════════════════════════
     FILTER PANEL - Years and Months
  ══════════════════════════════════════════ */
  .filter-panel {
    background: var(--clr-paper);
    border: 1px solid var(--clr-border-light);
    border-radius: var(--radius);
    padding: 28px;
    margin-bottom: 32px;
    box-shadow: var(--shadow-soft);
  }

  .filter-section {
    margin-bottom: 24px;
  }

  .filter-section:last-child {
    margin-bottom: 0;
  }

  .filter-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--clr-accent-secondary);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .filter-options {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
  }

  .filter-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    background: var(--clr-parchment);
    border: 2px solid var(--clr-border-medium);
    border-radius: 999px;
    cursor: pointer;
    transition: all 0.25s;
    user-select: none;
  }

  .filter-checkbox:hover {
    border-color: var(--clr-accent-primary);
    background: var(--clr-paper);
  }

  .filter-checkbox input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--clr-accent-primary);
  }

  .filter-checkbox label {
    cursor: pointer;
    font-weight: 500;
    font-size: 0.95rem;
    color: var(--clr-ink);
  }

  .filter-checkbox.checked {
    background: var(--clr-accent-lightest);
    border-color: var(--clr-accent-primary);
  }

  .filter-actions {
    display: flex;
    gap: 12px;
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--clr-border-light);
  }

  .filter-btn {
    padding: 8px 16px;
    border: 2px solid var(--clr-border-medium);
    background: var(--clr-parchment);
    color: var(--clr-ink);
    border-radius: var(--radius);
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
  }

  .filter-btn:hover {
    border-color: var(--clr-accent-primary);
    background: var(--clr-paper);
  }

  .filter-btn.primary {
    background: var(--clr-accent-primary);
    border-color: var(--clr-accent-primary);
    color: white;
  }

  .filter-btn.primary:hover {
    background: var(--clr-accent-secondary);
    border-color: var(--clr-accent-secondary);
  }

  /* ══════════════════════════════════════════
     WATCHING GOALS PANEL
  ══════════════════════════════════════════ */
  .goals-panel {
    background: var(--clr-paper);
    border: 1px solid var(--clr-border-light);
    border-radius: var(--radius);
    padding: 32px;
    margin-bottom: 40px;
    box-shadow: var(--shadow-soft);
    position: relative;
    overflow: hidden;
  }

  .goals-panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--clr-accent-secondary), var(--clr-accent-primary), var(--clr-accent-light));
  }

  .goals-header {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2rem;
    font-weight: 600;
    margin-bottom: 24px;
    color: var(--clr-accent-secondary);
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .goals-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 24px;
  }

  .goal-card {
    padding: 20px;
    background: var(--clr-parchment);
    border: 1px solid var(--clr-border-light);
    border-radius: var(--radius);
  }

  .goal-title {
    font-weight: 600;
    font-size: 0.95rem;
    color: var(--clr-ink-light);
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .goal-progress {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.5rem;
    font-weight: 600;
    color: var(--clr-accent-secondary);
    margin-bottom: 8px;
  }

  .goal-bar-bg {
    height: 8px;
    background: var(--clr-border-light);
    border-radius: 999px;
    overflow: hidden;
  }

  .goal-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--clr-accent-secondary), var(--clr-accent-primary));
    border-radius: 999px;
    transition: width 0.5s ease;
  }

  /* ══════════════════════════════════════════
     STATS BAR with elegant styling
  ══════════════════════════════════════════ */
  .stats-container {
    margin-bottom: 40px;
  }

  .stats-bar {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 16px;
  }

  .stat-card {
    background: var(--clr-paper);
    border: 1px solid var(--clr-border-light);
    padding: 24px 20px;
    border-radius: var(--radius);
    box-shadow: var(--shadow-soft);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }

  .stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--clr-accent-primary);
    transform: scaleX(0);
    transition: transform 0.3s;
  }

  .stat-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lifted);
  }

  .stat-card:hover::before {
    transform: scaleX(1);
  }

  .stat-card.active {
    background: linear-gradient(135deg, var(--clr-accent-secondary), var(--clr-accent-primary));
    color: white;
    border-color: var(--clr-accent-primary);
    transform: translateY(-4px) scale(1.02);
  }

  .stat-card.active::before {
    transform: scaleX(1);
    background: var(--clr-accent-light);
  }

  .stat-num {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.8rem;
    font-weight: 700;
    display: block;
    margin-bottom: 4px;
  }

  .stat-label {
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    opacity: 0.8;
    font-weight: 500;
  }

  .stat-card.active .stat-label {
    opacity: 0.95;
  }

  /* ══════════════════════════════════════════
     WATCHING TIME CHART
  ══════════════════════════════════════════ */
  .time-panel {
    background: var(--clr-paper);
    border: 1px solid var(--clr-border-light);
    padding: 36px;
    border-radius: var(--radius);
    margin-bottom: 48px;
    box-shadow: var(--shadow-soft);
  }

  .time-panel-head {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    margin-bottom: 32px;
  }

  .time-panel h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2rem;
    font-weight: 600;
    color: var(--clr-accent-secondary);
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .time-pills {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .pill {
    padding: 8px 20px;
    border-radius: 999px;
    border: 2px solid var(--clr-border-medium);
    background: var(--clr-parchment);
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.25s;
    color: var(--clr-ink);
  }

  .pill:hover {
    border-color: var(--clr-accent-primary);
    background: var(--clr-paper);
  }

  .pill.active {
    background: var(--clr-accent-primary);
    color: white;
    border-color: var(--clr-accent-primary);
  }

  .chart-wrap {
    width: 100%;
    height: 220px;
    position: relative;
  }

  canvas#chart {
    width: 100%;
    height: 100%;
    display: block;
  }

  .time-summary {
    text-align: center;
    margin-top: 24px;
    font-size: 1.05rem;
    color: var(--clr-ink-light);
    font-style: italic;
  }

  .time-summary strong {
    color: var(--clr-accent-secondary);
    font-weight: 600;
  }

  /* ══════════════════════════════════════════
     MOVIES GRID/LIST with poster-like cards
  ══════════════════════════════════════════ */
  .movies-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 32px;
    animation: fadeIn 0.5s ease-in;
  }

  .movies-grid.list-view {
    grid-template-columns: 1fr;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .movie-card {
    background: var(--clr-paper);
    border: 1px solid var(--clr-border-light);
    border-radius: var(--radius);
    overflow: hidden;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow-page);
    position: relative;
    animation: movieAppear 0.4s ease-out backwards;
  }

  @keyframes movieAppear {
    from {
      opacity: 0;
      transform: translateY(20px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .movie-card:nth-child(1) { animation-delay: 0.05s; }
  .movie-card:nth-child(2) { animation-delay: 0.1s; }
  .movie-card:nth-child(3) { animation-delay: 0.15s; }
  .movie-card:nth-child(4) { animation-delay: 0.2s; }
  .movie-card:nth-child(5) { animation-delay: 0.25s; }
  .movie-card:nth-child(6) { animation-delay: 0.3s; }

  .movie-card:hover {
    transform: translateY(-6px) scale(1.01);
    box-shadow: 0 12px 32px rgba(59, 130, 246, 0.15), 0 24px 48px rgba(59, 130, 246, 0.1);
    border-color: var(--clr-accent-primary);
  }

  .movie-strip {
    height: 6px;
    background: linear-gradient(90deg, var(--clr-accent-secondary), var(--clr-accent-primary));
  }

  .movie-body {
    padding: 32px;
  }

  .movie-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.6rem;
    font-weight: 700;
    margin-bottom: 6px;
    color: var(--clr-accent-secondary);
    line-height: 1.3;
  }

  .movie-director {
    color: var(--clr-ink-light);
    font-style: italic;
    font-size: 1.05rem;
    margin-bottom: 8px;
  }

  .movie-year {
    color: var(--clr-ink-light);
    font-size: 0.95rem;
    margin-bottom: 18px;
  }

  .badge {
    display: inline-block;
    padding: 6px 16px;
    border-radius: 999px;
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: white;
    margin-bottom: 16px;
  }

  .stars-rating {
    display: flex;
    align-items: center;
    gap: 4px;
    margin-bottom: 16px;
  }

  .star {
    width: 18px;
    height: 18px;
  }

  .rating-text {
    margin-left: 8px;
    font-size: 0.9rem;
    color: var(--clr-ink-light);
    font-weight: 500;
  }

  .meta-info {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--clr-border-light);
  }

  .meta-row {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.9rem;
    color: var(--clr-ink-light);
  }

  .meta-row svg {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
    color: var(--clr-accent-primary);
  }

  .genre-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 16px;
  }

  .genre-tag {
    padding: 4px 12px;
    background: var(--clr-accent-lightest);
    border: 1px solid var(--clr-accent-lighter);
    border-radius: 999px;
    font-size: 0.8rem;
    color: var(--clr-accent-secondary);
    font-weight: 500;
  }

  .notes-section {
    margin-top: 20px;
    padding: 20px;
    background: linear-gradient(to right, rgba(59, 130, 246, 0.08), rgba(59, 130, 246, 0.02));
    border-left: 4px solid var(--clr-accent-primary);
    border-radius: 0 var(--radius) var(--radius) 0;
  }

  .notes-label {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--clr-accent-secondary);
    margin-bottom: 8px;
  }

  .notes-text {
    font-style: italic;
    line-height: 1.6;
    color: var(--clr-ink);
  }

  /* ══════════════════════════════════════════
     LIST VIEW specific styling
  ══════════════════════════════════════════ */
  .movies-grid.list-view .movie-card {
    display: flex;
  }

  .movies-grid.list-view .movie-strip {
    width: 6px;
    height: auto;
  }

  .movies-grid.list-view .movie-body {
    flex: 1;
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 32px;
    align-items: start;
  }

  .movies-grid.list-view .movie-main {
    padding-right: 32px;
  }

  .movies-grid.list-view .movie-meta-side {
    border-left: 1px solid var(--clr-border-light);
    padding-left: 32px;
  }

  /* ══════════════════════════════════════════
     EMPTY STATE
  ══════════════════════════════════════════ */
  .empty-state {
    text-align: center;
    padding: 80px 32px;
    background: var(--clr-paper);
    border: 2px dashed var(--clr-border-medium);
    border-radius: var(--radius);
    margin: 40px 0;
  }

  .empty-state svg {
    width: 80px;
    height: 80px;
    color: var(--clr-border-medium);
    margin-bottom: 20px;
    opacity: 0.5;
  }

  .empty-state p {
    font-family: 'EB Garamond', serif;
    font-size: 1.3rem;
    color: var(--clr-ink-light);
    font-style: italic;
  }

  /* ══════════════════════════════════════════
     FOOTER with decorative elements
  ══════════════════════════════════════════ */
  .footer {
    text-align: center;
    margin-top: 80px;
    padding-top: 32px;
    border-top: 1px solid var(--clr-border-light);
    color: var(--clr-ink-light);
    font-size: 0.9rem;
  }

  .footer-ornament {
    width: 60px;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--clr-accent-primary), transparent);
    margin: 20px auto;
  }

  /* ══════════════════════════════════════════
     LOADING STATE
  ══════════════════════════════════════════ */
  .loader {
    min-height: 70vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 24px;
  }

  .loader-spinner {
    width: 48px;
    height: 48px;
    border: 3px solid var(--clr-border-light);
    border-top-color: var(--clr-accent-primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .loader-text {
    font-family: 'EB Garamond', serif;
    font-size: 1.3rem;
    color: var(--clr-ink-light);
    font-style: italic;
  }

  /* ══════════════════════════════════════════
     RESPONSIVE
  ══════════════════════════════════════════ */
  @media (max-width: 768px) {
    body { padding: 40px 16px 60px; }
    .header { margin-bottom: 48px; }
    .header h1 { font-size: 2.5rem; }
    .toolbar { padding: 20px; }
    .toolbar-row { flex-direction: column; align-items: stretch; }
    .search-box { min-width: 100%; }
    .goals-panel { padding: 24px; }
    .time-panel { padding: 24px; }
    .movies-grid { grid-template-columns: 1fr; gap: 24px; }
    .movies-grid.list-view .movie-body {
      grid-template-columns: 1fr;
      gap: 20px;
    }
    .movies-grid.list-view .movie-meta-side {
      border-left: none;
      border-top: 1px solid var(--clr-border-light);
      padding-left: 0;
      padding-top: 20px;
    }
    .movies-grid.list-view .movie-main {
      padding-right: 0;
    }
    .stats-bar { grid-template-columns: repeat(2, 1fr); }
  }

  @media (max-width: 480px) {
    .stats-bar { grid-template-columns: 1fr; }
    .goals-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div class="wrapper" id="app">
  <div class="loader">
    <div class="loader-spinner"></div>
    <div class="loader-text">Loading your cinema collection...</div>
  </div>
</div>

<!-- ══════════════════════════════════════════
     SVG ICON DEFINITIONS
══════════════════════════════════════════ -->
<svg style="display:none">
  <defs>
    <symbol id="icon-film" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/>
      <line x1="7" y1="2" x2="7" y2="22"/>
      <line x1="17" y1="2" x2="17" y2="22"/>
      <line x1="2" y1="12" x2="22" y2="12"/>
      <line x1="2" y1="7" x2="7" y2="7"/>
      <line x1="2" y1="17" x2="7" y2="17"/>
      <line x1="17" y1="17" x2="22" y2="17"/>
      <line x1="17" y1="7" x2="22" y2="7"/>
    </symbol>
    <symbol id="icon-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
    </symbol>
    <symbol id="icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
    </symbol>
    <symbol id="icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
    </symbol>
    <symbol id="icon-star-filled" viewBox="0 0 24 24" fill="#fbbf24" stroke="#fbbf24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
    </symbol>
    <symbol id="icon-star-empty" viewBox="0 0 24 24" fill="none" stroke="#cbd5e1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
    </symbol>
    <symbol id="icon-grid" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/>
    </symbol>
    <symbol id="icon-list" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/>
    </symbol>
    <symbol id="icon-target" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/>
    </symbol>
  </defs>
</svg>

<script>
// ══════════════════════════════════════════════════════════════════════
// DATA & STATE
// ══════════════════════════════════════════════════════════════════════

const STATUSES = [
  { id: 'watching', label: 'Currently Watching', color: '#3b82f6' },
  { id: 'watched', label: 'Watched', color: '#10b981' },
  { id: 'watchlist', label: 'Want to Watch', color: '#8b5cf6' },
  { id: 'planning', label: 'Planning to Watch', color: '#f59e0b' },
  { id: 'dropped', label: 'Dropped', color: '#ef4444' }
];

let movies = [];
let activeStatus = 'all';
let timeView = 'month';
let viewMode = 'grid'; // 'grid' or 'list'
let searchQuery = '';
let sortBy = 'dateAdded'; // dateAdded, title, rating, watchTime
let selectedYears = [];
let selectedMonths = [];

// ══════════════════════════════════════════════════════════════════════
// DATA LOADING FROM JSON
// ══════════════════════════════════════════════════════════════════════

async function loadMovies() {
  try {
    // Try to load from movielist.json
    const response = await fetch('movielist.json');
    if (!response.ok) {
      throw new Error('Failed to load movielist.json');
    }
    const data = await response.json();
    movies = data.movies || data || [];
    render();
  } catch (error) {
    console.error('Error loading movielist.json:', error);
    // Show error state
    const app = document.getElementById('app');
    app.innerHTML = `
      <div class="empty-state" style="margin-top: 100px;">
        <svg><use href="#icon-film"/></svg>
        <p style="color: #ef4444; font-weight: 600; margin-bottom: 12px;">Unable to load movielist.json</p>
        <p>Please ensure movielist.json is in the same directory as this HTML file.</p>
        <p style="margin-top: 16px; font-size: 0.9rem; opacity: 0.7;">Error: ${error.message}</p>
      </div>
    `;
  }
}

// ══════════════════════════════════════════════════════════════════════
// STATISTICS & CALCULATIONS
// ══════════════════════════════════════════════════════════════════════

function getWatchingStats() {
  const now = new Date();
  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
  const thisMonth = new Date(now.getFullYear(), now.getMonth(), 1);
  const thisYear = new Date(now.getFullYear(), 0, 1);

  let day = 0, month = 0, year = 0, allTime = 0;

  movies.forEach(m => {
    if (m.watchTime > 0) {
      allTime += m.watchTime;
      const start = m.startDate ? new Date(m.startDate) : null;
      const end = m.endDate ? new Date(m.endDate) : now;
      if (start) {
        if (start >= today || (start < today && end >= today)) day += m.watchTime;
        if (start >= thisMonth || (start < thisMonth && end >= thisMonth)) month += m.watchTime;
        if (start >= thisYear || (start < thisYear && end >= thisYear)) year += m.watchTime;
      }
    }
  });

  return { day, month, year, allTime };
}

function avgRating() {
  const rated = movies.filter(m => m.rating > 0);
  return rated.length ? (rated.reduce((s, m) => s + m.rating, 0) / rated.length).toFixed(1) : 0;
}

function getYearlyGoalProgress() {
  const watched = movies.filter(m => m.status === 'watched');
  const thisYear = new Date().getFullYear();
  const thisYearMovies = watched.filter(m => {
    if (!m.endDate) return false;
    return new Date(m.endDate).getFullYear() === thisYear;
  });
  const goal = 50; // movies per year
  return { current: thisYearMovies.length, goal, percent: Math.min((thisYearMovies.length / goal) * 100, 100) };
}

function getWatchTimeGoal() {
  const stats = getWatchingStats();
  const goal = 200; // hours per year
  return { current: stats.year, goal, percent: Math.min((stats.year / goal) * 100, 100) };
}

// ══════════════════════════════════════════════════════════════════════
// FILTERING & SORTING
// ══════════════════════════════════════════════════════════════════════

function getFilteredMovies() {
  let filtered = movies;

  // Status filter
  if (activeStatus !== 'all') {
    filtered = filtered.filter(m => m.status === activeStatus);
  }

  // Year filter
  if (selectedYears.length > 0) {
    filtered = filtered.filter(m => {
      const year = getMovieYear(m);
      return year && selectedYears.includes(year);
    });
  }

  // Month filter
  if (selectedMonths.length > 0) {
    filtered = filtered.filter(m => {
      const month = getMovieMonth(m);
      return month && selectedMonths.includes(month);
    });
  }

  // Search filter
  if (searchQuery.trim()) {
    const query = searchQuery.toLowerCase();
    filtered = filtered.filter(m => 
      m.title.toLowerCase().includes(query) || 
      (m.director && m.director.toLowerCase().includes(query)) ||
      (m.genre && m.genre.some(g => g.toLowerCase().includes(query))) ||
      (m.notes && m.notes.toLowerCase().includes(query))
    );
  }

  // Sort
  filtered = [...filtered].sort((a, b) => {
    switch (sortBy) {
      case 'title':
        return a.title.localeCompare(b.title);
      case 'rating':
        return (b.rating || 0) - (a.rating || 0);
      case 'watchTime':
        return (b.watchTime || 0) - (a.watchTime || 0);
      case 'dateAdded':
      default:
        // Most recently watched/started first
        const dateA = a.endDate || a.startDate || '1900-01-01';
        const dateB = b.endDate || b.startDate || '1900-01-01';
        return dateB.localeCompare(dateA);
    }
  });

  return filtered;
}

function getMovieYear(movie) {
  const date = movie.endDate || movie.startDate;
  if (!date) return null;
  return new Date(date).getFullYear();
}

function getMovieMonth(movie) {
  const date = movie.endDate || movie.startDate;
  if (!date) return null;
  return new Date(date).getMonth() + 1; // 1-12
}

function getAvailableYears() {
  const years = new Set();
  movies.forEach(m => {
    const year = getMovieYear(m);
    if (year) years.add(year);
  });
  return Array.from(years).sort((a, b) => b - a); // Descending
}

function getAvailableMonths() {
  return [
    { num: 1, name: 'January' },
    { num: 2, name: 'February' },
    { num: 3, name: 'March' },
    { num: 4, name: 'April' },
    { num: 5, name: 'May' },
    { num: 6, name: 'June' },
    { num: 7, name: 'July' },
    { num: 8, name: 'August' },
    { num: 9, name: 'September' },
    { num: 10, name: 'October' },
    { num: 11, name: 'November' },
    { num: 12, name: 'December' }
  ];
}

// ══════════════════════════════════════════════════════════════════════
// CHART RENDERING
// ══════════════════════════════════════════════════════════════════════

function drawChart() {
  const canvas = document.getElementById('chart');
  if (!canvas) return;
  
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.parentElement.getBoundingClientRect();
  const W = rect.width;
  const H = rect.height || 220;

  canvas.width = W * dpr;
  canvas.height = H * dpr;
  canvas.style.width = W + 'px';
  canvas.style.height = H + 'px';
  ctx.scale(dpr, dpr);
  ctx.clearRect(0, 0, W, H);

  const stats = getWatchingStats();
  const labels = { day: 'Today', month: 'This Month', year: 'This Year', alltime: 'All Time' };
  const values = { day: stats.day, month: stats.month, year: stats.year, alltime: stats.allTime };
  const keys = ['day', 'month', 'year', 'alltime'];

  const pad = { top: 28, right: 32, bottom: 44, left: 52 };
  const chartW = W - pad.left - pad.right;
  const chartH = H - pad.top - pad.bottom;
  const maxVal = Math.max(...keys.map(k => values[k]), 1);

  // Grid lines & Y labels
  ctx.strokeStyle = '#e2e8f0';
  ctx.lineWidth = 1;
  ctx.fillStyle = '#475569';
  ctx.font = '11px "Crimson Pro", serif';
  ctx.textAlign = 'right';
  const gridCount = 5;
  for (let i = 0; i <= gridCount; i++) {
    const y = pad.top + chartH - (chartH * i / gridCount);
    ctx.beginPath();
    ctx.moveTo(pad.left, y);
    ctx.lineTo(W - pad.right, y);
    ctx.stroke();
    const val = (maxVal * i / gridCount).toFixed(0);
    ctx.fillText(val + 'h', pad.left - 8, y + 4);
  }

  // Bars
  const barW = Math.min(chartW / keys.length * 0.6, 90);
  const gapW = (chartW - barW * keys.length) / (keys.length + 1);

  keys.forEach((k, i) => {
    const barH = (values[k] / maxVal) * chartH;
    const x = pad.left + gapW * (i + 1) + barW * i;
    const y = pad.top + chartH - barH;
    const isActive = (k === timeView);

    // Gradient fill
    const gradient = ctx.createLinearGradient(x, y, x, y + barH);
    if (isActive) {
      gradient.addColorStop(0, '#1e40af');
      gradient.addColorStop(1, '#3b82f6');
    } else {
      gradient.addColorStop(0, '#e2e8f0');
      gradient.addColorStop(1, '#cbd5e1');
    }
    ctx.fillStyle = gradient;

    // Rounded bar
    const r = 6;
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + barW - r, y);
    ctx.quadraticCurveTo(x + barW, y, x + barW, y + r);
    ctx.lineTo(x + barW, y + barH);
    ctx.lineTo(x, y + barH);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
    ctx.fill();

    // Value above bar
    ctx.fillStyle = '#1e293b';
    ctx.font = '600 13px "Crimson Pro", serif';
    ctx.textAlign = 'center';
    ctx.fillText(values[k] + 'h', x + barW / 2, y - 8);

    // X label
    ctx.fillStyle = isActive ? '#1e40af' : '#475569';
    ctx.font = (isActive ? '600 ' : '400 ') + '12px "Crimson Pro", serif';
    ctx.fillText(labels[k], x + barW / 2, pad.top + chartH + 26);
  });
}

// ══════════════════════════════════════════════════════════════════════
// ICON HELPERS
// ══════════════════════════════════════════════════════════════════════

const iconFilm = '<svg class="movie-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><use href="#icon-film"/></svg>';
const iconClock = (sz = 20) => `<svg width="${sz}" height="${sz}"><use href="#icon-clock"/></svg>`;
const iconCalendar = (sz = 16) => `<svg width="${sz}" height="${sz}"><use href="#icon-calendar"/></svg>`;
const iconTarget = (sz = 24) => `<svg width="${sz}" height="${sz}"><use href="#icon-target"/></svg>`;

function starHTML(rating) {
  let html = '<div class="stars-rating">';
  for (let i = 1; i <= 5; i++) {
    html += `<svg class="star"><use href="#icon-star-${i <= rating ? 'filled' : 'empty'}"/></svg>`;
  }
  html += `<span class="rating-text">${rating}/5</span></div>`;
  return html;
}

// ══════════════════════════════════════════════════════════════════════
// MAIN RENDER
// ══════════════════════════════════════════════════════════════════════

function render() {
  const app = document.getElementById('app');
  
  // Counts
  const counts = { all: movies.length };
  STATUSES.forEach(s => { counts[s.id] = movies.filter(m => m.status === s.id).length; });
  
  const filtered = getFilteredMovies();
  const stats = getWatchingStats();
  const avg = avgRating();
  const yearGoal = getYearlyGoalProgress();
  const timeGoal = getWatchTimeGoal();
  const availableYears = getAvailableYears();
  const availableMonths = getAvailableMonths();

  app.innerHTML = `
  <!-- Header -->
  <header class="header">
    <div class="decorative-top">
      <div class="ornament"></div>
      ${iconFilm}
      <div class="ornament"></div>
    </div>
    <h1>My Cinema Collection</h1>
    <p class="subtitle">A curated journey through the art of film</p>
  </header>

  <!-- Toolbar -->
  <div class="toolbar">
    <div class="toolbar-row">
      <div class="search-box">
        <input 
          type="text" 
          placeholder="Search by title, director, genre, or notes..." 
          value="${searchQuery}"
          id="searchInput"
        />
        <svg class="search-icon"><use href="#icon-search"/></svg>
      </div>
      
      <select class="sort-select" id="sortSelect">
        <option value="dateAdded" ${sortBy === 'dateAdded' ? 'selected' : ''}>Recently Watched</option>
        <option value="title" ${sortBy === 'title' ? 'selected' : ''}>Title (A-Z)</option>
        <option value="rating" ${sortBy === 'rating' ? 'selected' : ''}>Highest Rated</option>
        <option value="watchTime" ${sortBy === 'watchTime' ? 'selected' : ''}>Most Watch Time</option>
      </select>

      <div class="view-toggle">
        <button class="view-btn ${viewMode === 'grid' ? 'active' : ''}" data-view="grid" title="Grid View">
          <svg><use href="#icon-grid"/></svg>
        </button>
        <button class="view-btn ${viewMode === 'list' ? 'active' : ''}" data-view="list" title="List View">
          <svg><use href="#icon-list"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Filter Panel -->
  <div class="filter-panel">
    <div class="filter-section">
      <div class="filter-title">
        ${iconCalendar(20)}
        Filter by Year
      </div>
      <div class="filter-options" id="yearFilters">
        ${availableYears.map(year => `
          <div class="filter-checkbox ${selectedYears.includes(year) ? 'checked' : ''}" data-year="${year}">
            <input type="checkbox" id="year-${year}" ${selectedYears.includes(year) ? 'checked' : ''}>
            <label for="year-${year}">${year}</label>
          </div>
        `).join('')}
      </div>
    </div>

    <div class="filter-section">
      <div class="filter-title">
        ${iconCalendar(20)}
        Filter by Month
      </div>
      <div class="filter-options" id="monthFilters">
        ${availableMonths.map(month => `
          <div class="filter-checkbox ${selectedMonths.includes(month.num) ? 'checked' : ''}" data-month="${month.num}">
            <input type="checkbox" id="month-${month.num}" ${selectedMonths.includes(month.num) ? 'checked' : ''}>
            <label for="month-${month.num}">${month.name}</label>
          </div>
        `).join('')}
      </div>
    </div>

    <div class="filter-actions">
      <button class="filter-btn primary" id="applyFilters">Apply Filters</button>
      <button class="filter-btn" id="clearFilters">Clear All</button>
    </div>
  </div>

  <!-- Watching Goals Panel -->
  <div class="goals-panel">
    <h2 class="goals-header">
      ${iconTarget(24)}
      Watching Goals
    </h2>
    <div class="goals-grid">
      <div class="goal-card">
        <div class="goal-title">Movies This Year</div>
        <div class="goal-progress">${yearGoal.current} / ${yearGoal.goal}</div>
        <div class="goal-bar-bg">
          <div class="goal-bar-fill" style="width: ${yearGoal.percent}%"></div>
        </div>
      </div>
      <div class="goal-card">
        <div class="goal-title">Watch Time (Hours)</div>
        <div class="goal-progress">${timeGoal.current}h / ${timeGoal.goal}h</div>
        <div class="goal-bar-bg">
          <div class="goal-bar-fill" style="width: ${timeGoal.percent}%"></div>
        </div>
      </div>
      <div class="goal-card">
        <div class="goal-title">Average Rating</div>
        <div class="goal-progress">${avg > 0 ? avg : '—'} ${avg > 0 ? '/ 5.0' : ''}</div>
        <div class="goal-bar-bg">
          <div class="goal-bar-fill" style="width: ${avg * 20}%"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Stats Bar -->
  <div class="stats-container">
    <div class="stats-bar" id="statsBar">
      <div class="stat-card ${activeStatus === 'all' ? 'active' : ''}" data-status="all">
        <span class="stat-num">${counts.all}</span>
        <span class="stat-label">All Movies</span>
      </div>
      ${STATUSES.map(s => `
        <div class="stat-card ${activeStatus === s.id ? 'active' : ''}" data-status="${s.id}">
          <span class="stat-num">${counts[s.id]}</span>
          <span class="stat-label">${s.label}</span>
        </div>
      `).join('')}
    </div>
  </div>

  <!-- Watching Time Panel -->
  <div class="time-panel">
    <div class="time-panel-head">
      <h2>${iconClock(24)} Watch Time Analytics</h2>
      <div class="time-pills" id="timePills">
        ${['day', 'month', 'year', 'alltime'].map(v => `
          <button class="pill ${timeView === v ? 'active' : ''}" data-view="${v}">
            ${v === 'alltime' ? 'All Time' : v.charAt(0).toUpperCase() + v.slice(1)}
          </button>
        `).join('')}
      </div>
    </div>
    <div class="chart-wrap">
      <canvas id="chart"></canvas>
    </div>
    <div class="time-summary">
      Total watch time: <strong>${stats.allTime} hours</strong>
      ${avg > 0 ? ` · Average rating: <strong>${avg} / 5</strong>` : ''}
    </div>
  </div>

  <!-- Movies Display -->
  ${filtered.length === 0 ? `
    <div class="empty-state">
      <svg><use href="#icon-film"/></svg>
      <p>No movies match your current filters</p>
    </div>
  ` : `
    <div class="movies-grid ${viewMode === 'list' ? 'list-view' : ''}" id="moviesGrid">
      ${filtered.map(m => {
        const st = STATUSES.find(s => s.id === m.status) || STATUSES[0];
        
        const movieContent = `
          <div class="movie-title">${m.title}</div>
          ${m.director ? `<div class="movie-director">Directed by ${m.director}</div>` : ''}
          ${m.year ? `<div class="movie-year">${m.year}</div>` : ''}
          <span class="badge" style="background: ${st.color}">${st.label}</span>
          ${m.genre && m.genre.length > 0 ? `
            <div class="genre-tags">
              ${m.genre.map(g => `<span class="genre-tag">${g}</span>`).join('')}
            </div>
          ` : ''}
        `;

        const movieMeta = `
          ${m.rating > 0 ? starHTML(m.rating) : ''}
          <div class="meta-info">
            ${m.watchTime > 0 ? `<div class="meta-row">${iconClock(16)}<span>${m.watchTime} hours</span></div>` : ''}
            ${m.startDate ? `<div class="meta-row">${iconCalendar()}<span>Started: ${new Date(m.startDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</span></div>` : ''}
            ${m.endDate ? `<div class="meta-row">${iconCalendar()}<span>Watched: ${new Date(m.endDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</span></div>` : ''}
          </div>
          ${m.notes ? `
            <div class="notes-section">
              <div class="notes-label">My Review</div>
              <div class="notes-text">"${m.notes}"</div>
            </div>
          ` : ''}
        `;

        if (viewMode === 'list') {
          return `
            <div class="movie-card">
              <div class="movie-strip" style="background: ${st.color}"></div>
              <div class="movie-body">
                <div class="movie-main">
                  ${movieContent}
                </div>
                <div class="movie-meta-side">
                  ${movieMeta}
                </div>
              </div>
            </div>
          `;
        } else {
          return `
            <div class="movie-card">
              <div class="movie-strip" style="background: ${st.color}"></div>
              <div class="movie-body">
                ${movieContent}
                ${movieMeta}
              </div>
            </div>
          `;
        }
      }).join('')}
    </div>
  `}

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-ornament"></div>
    <p>A personal collection of ${movies.length} film${movies.length !== 1 ? 's' : ''}</p>
    <p style="margin-top: 8px; font-size: 0.85rem; opacity: 0.7;">Last updated: ${new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}</p>
  </footer>
  `;

  // Event listeners
  const searchInput = document.getElementById('searchInput');
  searchInput.addEventListener('input', e => {
    searchQuery = e.target.value;
    render();
  });

  const sortSelect = document.getElementById('sortSelect');
  sortSelect.addEventListener('change', e => {
    sortBy = e.target.value;
    render();
  });

  const statsBar = document.getElementById('statsBar');
  statsBar.addEventListener('click', e => {
    const card = e.target.closest('.stat-card');
    if (card) {
      activeStatus = card.dataset.status;
      render();
    }
  });

  const timePills = document.getElementById('timePills');
  timePills.addEventListener('click', e => {
    if (e.target.classList.contains('pill')) {
      timeView = e.target.dataset.view;
      render();
    }
  });

  document.querySelectorAll('.view-btn').forEach(btn => {
    btn.addEventListener('click', e => {
      const newView = e.currentTarget.dataset.view;
      if (newView && newView !== viewMode) {
        viewMode = newView;
        render();
      }
    });
  });

  // Year filter checkboxes
  const yearFilters = document.getElementById('yearFilters');
  yearFilters.addEventListener('click', e => {
    const filterBox = e.target.closest('.filter-checkbox');
    if (filterBox) {
      const year = parseInt(filterBox.dataset.year);
      const checkbox = filterBox.querySelector('input[type="checkbox"]');
      
      checkbox.checked = !checkbox.checked;
      
      if (checkbox.checked) {
        if (!selectedYears.includes(year)) {
          selectedYears.push(year);
        }
      } else {
        selectedYears = selectedYears.filter(y => y !== year);
      }
      
      render();
    }
  });

  // Month filter checkboxes
  const monthFilters = document.getElementById('monthFilters');
  monthFilters.addEventListener('click', e => {
    const filterBox = e.target.closest('.filter-checkbox');
    if (filterBox) {
      const month = parseInt(filterBox.dataset.month);
      const checkbox = filterBox.querySelector('input[type="checkbox"]');
      
      checkbox.checked = !checkbox.checked;
      
      if (checkbox.checked) {
        if (!selectedMonths.includes(month)) {
          selectedMonths.push(month);
        }
      } else {
        selectedMonths = selectedMonths.filter(m => m !== month);
      }
      
      render();
    }
  });

  // Apply filters button
  const applyBtn = document.getElementById('applyFilters');
  applyBtn.addEventListener('click', () => {
    render();
  });

  // Clear all filters
  const clearBtn = document.getElementById('clearFilters');
  clearBtn.addEventListener('click', () => {
    selectedYears = [];
    selectedMonths = [];
    render();
  });

  // Draw chart after render
  requestAnimationFrame(drawChart);
}

// Redraw chart on resize
window.addEventListener('resize', () => requestAnimationFrame(drawChart));

// Boot
loadMovies();
</script>
</body>
</html>
